---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Docker Konfiguration für die Datenerfassung 
---
= Docker Data Collector
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights verwendet diese Datenerfassung zum Erfassen von Kennzahlen aus Docker.



== Installation

. Klicken Sie unter *Observability > Collectors* auf *+Data Collector*. Für Docker:
+
Wenn Sie keinen Agenten für die Sammlung konfiguriert haben, werden Sie aufgefordert link:task_config_telegraf_agent.html["Installieren Sie einen Agenten"] Ihrer Umgebung zu unterstützen.

+
Wenn Sie bereits einen Agenten konfiguriert haben, wählen Sie das entsprechende Betriebssystem oder die entsprechende Plattform aus, und klicken Sie auf *Weiter*.

. Befolgen Sie die Anweisungen im Bildschirm Docker-Konfiguration, um den Datensammler zu konfigurieren. Die Anweisungen hängen vom Betriebssystem oder der Plattform ab, die Sie zur Datenerfassung verwenden.


image:DockerDCConfigLinux.png["Docker-Konfiguration"]



== Einrichtung

Das Telegraf-Input-Plug-in für Docker erfasst Kennzahlen über einen bestimmten UNIX-Socket oder einen TCP-Endpunkt.



=== Kompatibilität

Die Konfiguration wurde mit Docker Version 1.12.6 entwickelt.



=== Einrichtung



=== Zugriff auf Docker über einen UNIX-Socket

Wenn der Telegraf-Agent auf bareMetal läuft, fügen Sie den telegraf Unix-Benutzer zur Docker Unix-Gruppe hinzu, indem Sie Folgendes ausführen:

 sudo usermod -aG docker telegraf
Wenn der Telegraf-Agent in einem Kubernetes Pod ausgeführt wird, legen Sie den Docker Unix-Socket offen, indem Sie den Socket als Volume in den POD einbilden und das Volume dann in /var/run/docker.sock mounten.  Fügen Sie zum Beispiel der PodSpec Folgendes hinzu:

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
Fügen Sie dann dem Container Folgendes hinzu:

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Beachten Sie, dass sich das für die Kubernetes-Plattform bereitgestellte Cloud Insights-Installationsprogramm automatisch um diese Zuordnung kümmert.



=== Zugriff auf Docker über einen TCP-Endpunkt

Docker verwendet standardmäßig Port 2375 für unverschlüsselte Zugriffe und Port 2376 für verschlüsselten Zugriff.



== Objekte und Zähler

Folgende Objekte und ihre Zähler werden gesammelt:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objekt: | Kennungen: | Attribute: | Datenpunkte: 


| Docker Engine | Namespace
Docker Engine | Node-Name
Knoten-IP
Node-UUID
Node-BS
Kubernetes Cluster
Docker-Version
Einheit | Speicher
Container
Container Angehalten
Container Werden Ausgeführt
Container Angehalten
CPUs
Gehen Sie Routinen
Bilder
Listener-Ereignisse
Verwendete Dateibeschreibungen
Daten Verfügbar
Daten Gesamt
Verwendete Daten
Verfügbare Metadaten
Metadaten Insgesamt
Verwendete Metadaten
Blockgröße Des Pools 


| Docker Container | Namespace
Containername
Docker Engine | Kubernetes Container-Hash
Kubernetes-Container-Ports
Anzahl Kubernetes-Container-Neustart
Message Path Für Kubernetes Container-Beendigung
Richtlinie Für Kubernetes Container Message Termination
Kulanzzeit Nach Kubernetes Pod-Kündigung
Container-Image
Containerstatus
Container-Version
Node-Name
Kubernetes Container Log Path
Name Des Kubernetes Containers
Docker-Typ Kubernetes
Name Des Kubernetes Pod
Kubernetes Pod-Namespace
Kubernetes-Pod-UID
Kubernetes Sandbox-ID
Knoten-IP
Node-UUID
Docker-Version
Kubernetes IO-Konfiguration erkannt
Kubernetes IO-Konfigurationsquelle
OpenShift-E/A-SCC
Kubernetes Beschreibung
Kubernetes-Anzeigename
OpenShift-Tags
Kompose Service
Pod-Vorlagen-Hash
Hash Der Controller-Revision
Pod-Vorlagenerstellung
Lizenz
Schema Build-Datum
Schemalizenz
Schemaname
Schema-URL
Schema VCS-URL
Schemaanbieter
Schemaversion
Schemaschema-Version
Betreuer
Kunden-Pod
Kubernetes Status efulSet Pod-Name
Mandant
Webconsole
Der Netapp Architektur Sind
Maßgeblicher Quell-URL
Build-Datum
RH-Build-Host
RH-Komponente
Vertriebsumfang
Installieren
Freigabe
Laufen
Zusammenfassung
Deinstallieren
VCS-Ref
VCS-Typ
Anbieter
Version
Integritätsstatus
Container-ID | Memory Active Anonymous
Aktive Speicherdatei
Arbeitsspeicher-Cache
Hierarchischer Speichergrenzwert
Memory Inactive Anonymous
Memory Inactive File
Speicherlimit
Speicher-Mapping-Datei
Max. Speicherauslastung
Speicherseitenfehler
Hauptfehler Der Speicherseite
Speicher Einpager
Speicher Ausgepager
Speicherresident Set Size
Memory Resident Set Size Riesig
Memory Total Active Anonymous
Speicher Gesamte Aktive Datei
Speicher Gesamt-Cache
Memory Total Inactive Anonymous
Speicher Insgesamt Inaktive Datei
Speicher Gesamte Zugeordnete Datei
Fehler Bei Der Gesamten Speicherseite
Memory Total Page Major-Fehler
Speicher Insgesamt Einges
Speicher Insgesamt Ausgelagert
Speicher Gesamtgröße Des Resident Set
Speicher Gesamte Resident Set Size Riesig
Speicher Insgesamt Nicht Verfügbar
Speicher Nicht Verfügbar
Speicherauslastung
Speicherauslastung In Prozent
Exit-Code
Toom getötet
PID
Gestartet Um
Fehler Bei Streak 


| Docker Container Block IO | Namespace
Containername
Gerät
Docker Engine | Kubernetes Container-Hash
Kubernetes-Container-Ports
Anzahl Kubernetes-Container-Neustart
Message Path Für Kubernetes Container-Beendigung
Richtlinie Für Kubernetes Container Message Termination
Kulanzzeit Nach Kubernetes Pod-Kündigung
Container-Image
Containerstatus
Container-Version
Node-Name
Kubernetes Container Log Path
Name Des Kubernetes Containers
Docker-Typ Kubernetes
Name Des Kubernetes Pod
Kubernetes Pod-Namespace
Kubernetes-Pod-UID
Kubernetes Sandbox-ID
Knoten-IP
Node-UUID
Docker-Version
Kubernetes Konfiguration Gesehen
Kubernetes-Konfigurationsquelle
OpenShift-SCC
Kubernetes Beschreibung
Kubernetes-Anzeigename
OpenShift-Tags
Schemaschema-Version
Pod-Vorlagen-Hash
Hash Der Controller-Revision
Pod-Vorlagenerstellung
Kompose Service
Schema Build-Datum
Schemalizenz
Schemaname
Schemaanbieter
Kunden-Pod
Kubernetes Status efulSet Pod-Name
Mandant
Webconsole
Build-Datum
Lizenz
Anbieter
Der Netapp Architektur Sind
Maßgeblicher Quell-URL
RH-Build-Host
RH-Komponente
Vertriebsumfang
Installieren
Betreuer
Freigabe
Laufen
Zusammenfassung
Deinstallieren
VCS-Ref
VCS-Typ
Version
Schema-URL
Schema VCS-URL
Schemaversion
Container-ID | I/O-Servicebytes rekursiv asynchron
I/O-Servicebytes rekursives Lesen
Rekursive Synchronisierung von IO-Servicebytes
I/O-Service Bytes rekursiv insgesamt
I/O-Servicebytes rekursives Schreiben
I/O-Wartung rekursiv asynchron
I/O-Serviced Recursive Read
Rekursiver Sync von IO-Wartung
Rekursiver IO-Serviced Total
Rekursiver I/O-Schreibzugriff 


| Docker Container Network | Namespace
Containername
Netzwerk
Docker Engine | Container-Image
Containerstatus
Container-Version
Node-Name
Knoten-IP
Node-UUID
Node-BS
K8s-Cluster
Docker-Version
Container-ID | RX fallen gelassen
RX-Bytes
RX-Fehler
RX-Pakete
TX abgebrochen
TX Byte
TX-Fehler
TX-Pakete 


| Docker Container-CPU | Namespace
Containername
CPU
Docker Engine | Kubernetes Container-Hash
Kubernetes-Container-Ports
Anzahl Kubernetes-Container-Neustart
Message Path Für Kubernetes Container-Beendigung
Richtlinie Für Kubernetes Container Message Termination
Kulanzzeit Nach Kubernetes Pod-Kündigung
Kubernetes Konfiguration Gesehen
Kubernetes-Konfigurationsquelle
OpenShift-SCC
Container-Image
Containerstatus
Container-Version
Node-Name
Kubernetes Container Log Path
Name des Kubernetes-Containers
Docker-Typ Kubernetes
Name Des Kubernetes Pod
Kubernetes Pod-Namespace
Kubernetes-Pod-UID
Kubernetes Sandbox-ID
Knoten-IP
Node-UUID
Node-BS
Kubernetes Cluster
Docker-Version
Kubernetes Beschreibung
Kubernetes-Anzeigename
OpenShift-Tags
Schemaversion
Pod-Vorlagen-Hash
Hash Der Controller-Revision
Pod-Vorlagenerstellung
Kompose Service
Schema Build-Datum
Schemalizenz
Schemaname
Schemaanbieter
Kunden-Pod
Kubernetes Status efulSet Pod-Name
Mandant
Webconsole
Build-Datum
Lizenz
Anbieter
Der Netapp Architektur Sind
Maßgeblicher Quell-URL
RH-Build-Host
RH-Komponente
Vertriebsumfang
Installieren
Betreuer
Freigabe
Laufen
Zusammenfassung
Deinstallieren
VCS-Ref
VCS-Typ
Version
Schema-URL
Schema VCS-URL
Schemaversion
Container-ID | Drosselungszeiträume
Drosselung Gedrosselte Perioden
Drosselung Gedrosselte Zeit
Verwendung Im Kernel-Modus
Verwendung Im Benutzermodus
Auslastung In Prozent
Verwendungssystem
Verbrauch Insgesamt 
|===


== Fehlerbehebung

[cols="2*"]
|===
| Problem: | Versuchen Sie dies: 


| Nach den Anweisungen auf der Konfigurationsseite sehe ich meine Docker-Metriken in Cloud Insights nicht. | Überprüfen Sie die Telegraf Agent-Protokolle, um festzustellen, ob der folgende Fehler gemeldet wird:

 E! Fehler in Plugin [inputs.Docker]: Beim Versuch, eine Verbindung zum Docker Daemon-Socket herzustellen, wurde die Berechtigung verweigert

Wenn dies der Fall ist, ergreifen Sie die erforderlichen Schritte, um dem Telegraf-Agenten den Zugriff auf den Docker Unix-Socket wie oben angegeben zu ermöglichen. 
|===
Weitere Informationen finden Sie im link:concept_requesting_support.html["Unterstützung"] Seite.
