---
sidebar: sidebar 
permalink: task_config_telegraf_hadoop.html 
keywords: telegraf, installation, install, Hadoop 
summary: Konfiguration des Hadoop Data Collector 
---
= Hadoop Data Collector
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights verwendet diese Datenerfassung zum Erfassen von Kennzahlen aus Hadoop.



== Installation

. Klicken Sie unter *Observability > Collectors* auf *+Data Collector*. Für Hadoop.
+
Wählen Sie das Betriebssystem oder die Plattform aus, auf dem der Telegraf-Agent installiert ist.

. Wenn Sie noch keinen Agent für die Sammlung installiert haben oder einen Agent für ein anderes Betriebssystem oder eine andere Plattform installieren möchten, klicken Sie auf _Anweisungen anzeigen_, um das zu erweitern link:task_config_telegraf_agent.html["Agenten-Installation"] Anweisungen.
. Wählen Sie den Agent-Zugriffsschlüssel für diesen Datensammler aus. Sie können einen neuen Agent-Zugriffsschlüssel hinzufügen, indem Sie auf die Schaltfläche *+ Agent Access Key* klicken. Best Practice: Verwenden Sie einen anderen Agent-Zugriffsschlüssel nur, wenn Sie Datensammler gruppieren möchten, zum Beispiel nach Betriebssystem/Plattform.
. Befolgen Sie die Konfigurationsschritte, um den Datensammler zu konfigurieren. Die Anweisungen hängen vom Betriebssystem oder der Plattform ab, die Sie zur Datenerfassung verwenden.


image:HadoopDCConfigLinux-1.png["Hadoop Konfiguration"]
image:HadoopDCConfigLinux-2.png["Hadoop Konfiguration"]



== Einrichtung

Eine vollständige Hadoop Implementierung umfasst die folgenden Komponenten:

* NameNode: Das primäre System Hadoop Distributed File System (HDFS) Koordiniert eine Reihe von DataNodes.
* Sekundärer NameNode: Ein warmer Failover für den NameNode. In Hadoop erfolgt die Heraufstufung auf NameNode nicht automatisch. Secondary NameNode sammelt Informationen von NameNode, damit sie bei Bedarf heraufgestuft werden können.
* DataNode: Tatsächlicher Eigentümer von Daten.
* ResourceManager: Das primäre Computersystem (Yarn). Koordiniert eine Reihe von NodeManagers.
* NodeManager: Die Ressource für Computing. Aktueller Speicherort für das Ausführen von Anwendungen.
* JobHistorieServer: Verantwortlich für die Bearbeitung aller Anfragen im Zusammenhang mit der Jobhistorie.


Das Hadoop Plugin basiert auf dem telegraf Jolokia Plugin. Um Informationen aus allen Hadoop Komponenten zu sammeln, muss JMX auf allen Komponenten konfiguriert und zugänglich gemacht werden.



=== Kompatibilität

Die Konfiguration wurde mit Hadoop Version 2.9 entwickelt.



=== Einrichtung



==== Jolokia Agent Jar

Für alle einzelnen Komponenten muss eine Version der Jolokia Agent JAR-Datei heruntergeladen werden. Die gegen getestete Version war link:https://jolokia.org/download.html["Jolokia Agent 1.6.0"].

Die nachfolgende Anleitung setzt voraus, dass die heruntergeladene JAR-Datei (jolokia-jvm-1.6.0-Agent.jar) unter der Adresse '/opt/hadoop/lib/' abgelegt wird.



==== NameNode

Um NameNode zu konfigurieren, um die Jolokia API freizugeben, können Sie unter <HADOOP_HOME>/etc/hadoop/hadoop-env.sh Folgendes einrichten:

[listing]
----
export HADOOP_NAMENODE_OPTS="$HADOOP_NAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7800,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8000 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8000 above) and Jolokia (7800). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== Sekundärer NameNode

Um den sekundären NameNode zu konfigurieren, um die Jolokia API freizugeben, können Sie Folgendes in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh einrichten:

[listing]
----
export HADOOP_SECONDARYNAMENODE_OPTS="$HADOOP_SECONDARYNAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7802,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8002 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8002 above) and Jolokia (7802). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== DataNode

Um die DataNodes so zu konfigurieren, dass sie die Jolokia API aussetzen, können Sie Folgendes in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh einrichten:

[listing]
----
export HADOOP_DATANODE_OPTS="$HADOOP_DATANODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7801,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8001 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8001 above) and Jolokia (7801). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== ResourceManager

Um den ResourceManager so zu konfigurieren, dass die Jolokia API zur Verfügung gestellt wird, können Sie Folgendes in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh einrichten:

[listing]
----
export YARN_RESOURCEMANAGER_OPTS="$YARN_RESOURCEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7803,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8003 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8003 above) and Jolokia (7803). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== NodeManager

Um die NodeManagers so zu konfigurieren, dass sie die Jolokia API aussetzen, können Sie Folgendes in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh einrichten:

[listing]
----
export YARN_NODEMANAGER_OPTS="$YARN_NODEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7804,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8004 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8004 above) and Jolokia (7804). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== JobGeschichteServer

Um den JobHistorieServer so zu konfigurieren, dass die Jolokia API zur Verfügung gestellt wird, können Sie Folgendes in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh einrichten:

[listing]
----
export HADOOP_JOB_HISTORYSERVER_OPTS="$HADOOP_JOB_HISTORYSERVER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7805,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8005 -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8005 above) and Jolokia (7805). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


== Objekte und Zähler

Folgende Objekte und ihre Zähler werden gesammelt:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objekt: | Kennungen: | Attribute: | Datenpunkte: 


| Sekundärer Hadoop NameNode | Cluster
Namespace
Server | Node-Name
Knoten-IP
Info Kompilieren
Version | GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 


| Hadoop NodeManager | Cluster
Namespace
Server | Node-Name
Knoten-IP | Container Zugewiesen
Speicherzuweisung
Speicher Zugewiesen Oportunistic
Virtuelle Kerne Zugewiesen Oportunistic
Virtuelle Kerne Zugewiesen
Verfügbarer Speicher
Virtuelle Kerne Verfügbar
Verzeichnisse Lokal Schlecht
Verzeichnisse Fehlerhaftes Protokoll
Cachegröße Vor Bereinigung
Container-Startdauer Durchschn. Zeit
Container-Startdauer Anzahl Der Operationen
Container Abgeschlossen
Container Fehlgeschlagen
Container Initing
Container Wurden Getötet
Container Gestartet
Behälterreinitation
Container wurden bei einem Ausfall wieder ausgeführt
Container Werden Ausgeführt
Festplattenauslastung Gute Lokale Verzeichnisse
Festplattenauslastung Gute Protokollverzeichnisse
Bytes Private Gelöscht
Öffentliche Bytes Gelöscht
Container Mit Geschäftschancen
Gelöschte Bytes Insgesamt
Verbindungen Zufällig Wiedergeben
Zufallswiedergabe Der Ausgabebytes
Zufallsausgänge Fehlgeschlagen
Zufallsausgänge Sind In Ordnung
GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 


| Hadoop ResourceManager | Cluster
Namespace
Server | Node-Name
Knoten-IP | Startverzögerung des ApplicationMaster durchschn
Verzögerungsnummer für den Start des ApplicationMaster
Anmeldeverzögerung des ApplicationMaster mittl
ApplicationMaster Register Verzögerungsnummer
NodeManager Active Number
NodeManager Demissed Number
NodeManager-Demissing-Nummer
NodeManager: Verlorene Nummer
NodeManager-Neustartnummer
NodeManager Shutdown-Nummer
NodeManager-gesunde Anzahl
NodeManager-Speicherlimit
Limit für virtuelle NodeManager-Kerne
Genutzte Kapazität
Aktive Anwendungen
Aktive Benutzer
Aggregate Container Zugewiesen
Aggregat-Container Als Vorweggenommen
Container Aggregieren Freigegeben
Aggregierte Speichersekunde Wurde Aufgehoben
Aggregate Node Lokale Container Zugewiesen
Aggregate Off Switch Container Zugewiesen
Aggregate Ack Lokale Container Zugewiesen
Zusammenfassung Der Virtuellen Kerne Sekunden Als Voreingestellt
Container Zugewiesen
Speicher Zugewiesen
Virtuelle Kerne Zugewiesen
Anwendungsversuch Erste Containerzuweisungsverzögerung Durchschn. Zeit
Anwendungsversuch Erste Container-Zuweisung Verzögerungsnummer
Anwendungen Abgeschlossen
Anwendungen Fehlgeschlagen
Anwendungen Abgebrochen
Ausstehende Anwendungen
Laufende Anwendungen
Anträge Eingereicht
Verfügbarer Speicher
Virtuelle Kerne Verfügbar
Ausstehende Container
Arbeitsspeicher Ausstehend
Virtuelle Kerne Ausstehend
Container Reserviert
Reservierter Speicher
Virtuelle Kerne Reserviert
Verwendeter Speicher-ApplicationMaster
Anwendungsmaster für virtuelle Kerne verwendet
Genutzte Kapazität
GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 


| Hadoop DataNode | Cluster
Namespace
Server | Node-Name
Knoten-IP
Cluster-ID
Version | Sender/Empfänger-Anzahl
Übertragung läuft
Cache-Kapazität
Cache Verwendet
Kapazität
DFS verwendet
Geschätzter Insgesamt Verlorener Kapazität
Fehlerrate Des Letzten Volumes
Anzahl Der Zwischengespeicherten Blöcke
Blocknummer konnte nicht zwischengespeichert werden
Die Blocknummer konnte nicht aufgehoben werden
Anzahl Der Volumes Fehlgeschlagen
Verbleibende Kapazität
GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 


| Hadoop NameNode | Cluster
Namespace
Server | Node-Name
Knoten-IP
Transaktions-ID zuletzt geschrieben
Zeit Seit Der Letzten Geladenen Bearbeitungen
HA-Status
Dateisystemstatus
Block Pool-ID
Cluster-ID
Info Kompilieren
Anzahl Der Unterschiedlichen Versionen
Version | Blockkapazität
Blöcke Insgesamt
Gesamtkapazität
Genutzte Kapazität
Verwendete Kapazität nicht-DFS
Blöcke Beschädigt
Geschätzter Insgesamt Verlorener Kapazität
Blockiert Überschuss
Herzschläge Abgelaufen
Dateien Insgesamt
Länge Der Warteschlange Für Dateisystemsperre
Blöcke Fehlen
Blöcke fehlende Replikation mit Faktor 1
Clients Aktiv
Data Nodes Dead
Deaktivierung Von Daten-Nodes Inaktiv
Daten-Nodes Werden Live Stillgelegt
Data Nodes Wird Nicht Mehr Ausgeführt
Nummer Der Verschlüsselungszonen
Daten-Nodes Werden In Wartung Eingegeben
Dateien In Bearbeitung
Data Nodes Dead in Maintenance
Datenknoten werden in Wartung gespeichert
Data Nodes Live
Lagerung Veraltet
Replikation Mit Ausstehenden Timeouts
Data Node-Nachricht Steht Aus
Blöcke Mit Ausstehender Löschung
Blöcke Mit Ausstehender Replikation
Blöcke Falsch Repliziert Verschoben
Blöcke Geplante Replizierung
Snapshots
Snapshottable-Verzeichnisse
Veraltete Daten-Nodes
Dateien Insgesamt
Insgesamt Laden
Synchronisierungsanzahl Insgesamt
Transaktionen Seit Dem Letzten Kontrollpunkt
Transaktionen Seit Der Letzten Protokollrolle
Blöcke Nicht Repliziert
Volume-Fehler Insgesamt
Synchronisierungszeiten Gesamt
Max. Anzahl Objekte
Operations Block Add
Operationen Ermöglichen Snapshots
Batched-Operationen-Block
Operations Block In Warteschlange
Betriebsblock empfangen und gelöscht
Durchschn. Betriebsbericht
Berichtsnummer Des Operations Block
Durchschnittszeit Cache-Bericht
Nummer Des Cacheberichts
Operationen Datei Erstellen
Operationen Erstellen Von Snapshots
Operationen Symlink erstellen
Operationen Datei Löschen
Operationen Snapshot Löschen
Vorgänge Snapshot Nicht Zulassen
Betriebsdatei Ein/Aus
Dateien Angehängt
Dateien Erstellt
Dateien Gelöscht
Dateiliste
Dateien Umbenannt
Dateien Abgeschnitten
Ladedauer Des Dateisystems
Operationen generieren EDEK Durchschn. Zeit
Operationen generieren EDEK
Operations Get Additional Data Node
Blöcke Erhalten Standorte
Durchschnittliche Bearbeitungszeit Abrufen
Bearbeitungsnummer Abrufen
Durchschnittszeit Für Bild Abrufen
Bildnummer Abrufen
Operationen Verknüpfungsziel Abrufen
Operations Get Listing
Operations List Snapshottable Dir
Replikation Nicht Geplant Nummer
Mittl. Zeit Für Bild Setzen
Put Bildnummer
Vorgänge Umbenennen Von Snapshots
Durchschnittliche Zeit Der Ressourcenüberprüfung
Zeitnummer Der Ressourcenüberprüfung
Zeit Im Abgesicherten Modus
Operations Snapshot Diff Report
Operations Storage Block Report
Replikation Erfolgreich
Durchschn. Synchronisierungszeit
Synchronisierungsnummer Des Betriebs
Zeitüberschreitung Bei Der Replikation
Operationen Insgesamt
Durchschn. Transaktionszeit
Transaktion Batchd Synchron
Transaktionsnummer
EDEK Aufwärmezeit durchschn
EDEK Warmup-Nummer
Belegter Block-Pool-Speicherplatz
Cache-Kapazität
Cache Verwendet
Freie Kapazität
Prozentsatz Der Blockpool-Nutzung
Prozent Verbleibend
Prozent Verwendet
Gewinde
GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 


| Hadoop JobGeschichteServer | Cluster
Namespace
Server | Node-Name
Knoten-IP | GC-Zählung
Anzahl GC-Kopien
GC-Markierungen: Kompakte Anzahl der Bereinigung
Schwellenwert für Informationen zur GC-Nummer überschritten
Schwellenwert für GC-Nummernwarnung überschritten
GC-Zeit
GC-Kopierzeit
GC-Markierungen: Kompakte Zeit für die Bereinigung
GC Total Extra Sleep Time
Anzahl Der Protokollfehler
Protokollierung Fatal Anzahl
Anzahl Der Protokollinformationen
Anzahl Der Warnungen Für Protokolle
Memory Heap Belegt
Speicher Heap Max
Speicher Heap Verwendet
Max. Speicher
Speicher Nicht Heap Belegt
Speicher Nicht Heap Max
Speicher Nicht Heap Verwendet
Gewinde Blockiert
Threads Neu
Fäden Lauffähig
Threads Beendet
Threads, Die Gewartet Wurden
Threads Warten 
|===


== Fehlerbehebung

Weitere Informationen finden Sie im link:concept_requesting_support.html["Unterstützung"] Seite.
